<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"				xmlns:jee="http://www.springframework.org/schema/jee"
	   xmlns:jms="http://www.springframework.org/schema/jms"				xmlns:p="http://www.springframework.org/schema/p"
       xmlns:tx="http://www.springframework.org/schema/tx"					xmlns:util="http://www.springframework.org/schema/util"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
						   http://www.springframework.org/schema/jee		http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
						   http://www.springframework.org/schema/jms		http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
						   http://www.springframework.org/schema/tx			http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
						   http://www.springframework.org/schema/util	    http://www.springframework.org/schema/util/spring-util-3.0.xsd
						   http://www.springframework.org/schema/context	http://www.springframework.org/schema/context/spring-context-3.0.xsd">

	<context:component-scan base-package="com.stee.emas"/>
	<tx:annotation-driven transaction-manager="transactionManager"/>
										
	<jee:jndi-lookup id="dataSource" jndi-name="EMASDataSource" resource-ref="false"/>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
		<property name="dataSource" ref="dataSource"/>
		<property name="packagesToScan" value="com.stee.emas.common.entity"/>
        <!-- <property name="annotatedClasses">
        	 	<list>
            		<value>com.stee.emas.common.entity.CommonTypeConfig</value>
            		<value>com.stee.emas.common.entity.DetectorCaidGroupConfig</value>
	            	<value>com.stee.emas.common.entity.DetectorCaidGroupConfigId</value>
	            	<value>com.stee.emas.common.entity.DetectorLaneConfig</value>
	            	<value>com.stee.emas.common.entity.EquipConfig</value>
	            	<value>com.stee.emas.common.entity.EquipStatus</value>
	            	<value>com.stee.emas.common.entity.HistEquipStatus</value>
	            	<value>com.stee.emas.common.entity.HistEquipStatusId</value>
	            	<value>com.stee.emas.common.entity.HistLos</value>
	            	<value>com.stee.emas.common.entity.HistLosId</value>
	            	<value>com.stee.emas.common.entity.HistTechAlarmId</value>
	            	<value>com.stee.emas.common.entity.HistTechnicalAlarm</value>
	            	<value>com.stee.emas.common.entity.HistTrafficAlert</value>
	            	<value>com.stee.emas.common.entity.HistTrafficAlertId</value>
	            	<value>com.stee.emas.common.entity.HistTrafficMeasure1Hour</value>
	            	<value>com.stee.emas.common.entity.HistTrafficMeasure1Min</value>
	            	<value>com.stee.emas.common.entity.HistTrafficMeasure5Min</value>
	            	<value>com.stee.emas.common.entity.HistTrafficMeasureId</value>
	            	<value>com.stee.emas.common.entity.Los</value>
	            	<value>com.stee.emas.common.entity.LosConfig</value>
	            	<value>com.stee.emas.common.entity.SystemParameter</value>
	            	<value>com.stee.emas.common.entity.SystemParameterId</value>
	            	<value>com.stee.emas.common.entity.TechnicalAlarm</value>
	            	<value>com.stee.emas.common.entity.TechnicalAlarmConfig</value>
	            	<value>com.stee.emas.common.entity.TechnicalAlarmConfigId</value>
	            	<value>com.stee.emas.common.entity.TrafficAlert</value>
	            	<value>com.stee.emas.common.entity.TrafficMeasure</value>
	            	<value>com.stee.emas.common.entity.TrafficMeasureId</value>
	            	<value>com.stee.emas.common.entity.VmsDefaultMsg</value>
	            	<value>com.stee.emas.common.entity.VmsDefaultMsgPage</value>
	            	<value>com.stee.emas.common.entity.VmsDefaultMsgPageId</value>
	            	<value>com.stee.emas.common.entity.VmsDimLevelConfig</value>
	            	<value>com.stee.emas.common.entity.VmsPictogramConfig</value>
	            	<value>com.stee.emas.common.entity.VmsTemplateConfig</value>
	            	<value>com.stee.emas.common.entity.VmsLibrary</value>
	            	<value>com.stee.emas.common.entity.VmsLibraryPage</value>
	            	<value>com.stee.emas.common.entity.VmsLibraryPageId</value>
	            	<value>com.stee.emas.common.entity.VmsMsg</value>
	            	<value>com.stee.emas.common.entity.VmsMsgPage</value>
	            	<value>com.stee.emas.common.entity.VmsMsgPageId</value>
	            	<value>com.stee.emas.common.entity.VmsTemplatePicConfig</value>
	            	<value>com.stee.emas.common.entity.VmsTemplatePicConfigId</value>
	            	<value>com.stee.emas.common.entity.VmsTemplateTextlineConfig</value>
	            	<value>com.stee.emas.common.entity.VmsTemplateTextlineConfigId</value>
	            	<value>com.stee.emas.common.entity.VmsTimetableConfig</value>
            	</list>
        	</property>-->
        <property name="hibernateProperties">
        	<!-- <prop key="hibernate.dialect">org.hibernate.dialect.SQLServer2008Dialect</prop>
			<prop key="hibernate.show_sql">false</prop>
			<prop key="hibernate.format_sql">true</prop>
			<prop key="hibernate.use_sql_comments">true</prop> -->
            <value>
				hibernate.dialect=org.hibernate.dialect.SQLServer2008Dialect
				<!-- hibernate.hbm2ddl.auto=update -->
				hibernate.show_sql=true
				 <!-- hibernate.current_session_context_class=thread
				 hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory -->
				<!-- hibernate.transaction.factory_class=org.hibernate.transaction.JTATransactionFactory
				hibernate.transaction.manager_lookup_class=org.hibernate.transaction.WeblogicTransactionManagerLookup -->
				
				<!-- hibernate.connection.driver_class=${hibernate.connection.driver_class}
				hibernate.connection.url=${hibernate.connection.url}
				hibernate.connection.username=${hibernate.connection.username}
				hibernate.connection.password=${hibernate.connection.password}
				hibernate.default_schema=${hibernate.default_schema}
				hibernate.jdbc.batch_size=${hibernate.jdbc.batch_size}
 				hibernate.c3p0.max_size=${hibernate.c3p0.max_size}
				hibernate.c3p0.min_size=${hibernate.c3p0.min_size}
				hibernate.c3p0.timeout=${hibernate.c3p0.timeout}
				hibernate.c3p0.max_statements=${hibernate.c3p0.max_statements}
				hibernate.c3p0.idle_test_period=${hibernate.c3p0.idle_test_period}
				hibernate.c3p0.acquire_increment=${hibernate.c3p0.acquire_increment}
				hibernate.c3p0.validate=${hibernate.c3p0.validate}
				hibernate.cache.region.factory_class=${hibernate.cache.region.factory_class}
				hibernate.connection.provider_class=${hibernate.connection.provider_class}
 				hibernate.generate_statistics=false
				hibernate.cache.use_second_level_cache=true
				hibernate.cache.use_query_cache=true -->
            </value>
        </property>
    </bean>
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    	<property name="sessionFactory" ref="sessionFactory"/>
    </bean>
</beans>